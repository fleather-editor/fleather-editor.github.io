<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=283500f91980d91031e083409342feab137f96f8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Style Attributes | Fleather</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Style Attributes" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/doc/concepts/attributes.html" />
<meta property="og:url" content="http://localhost:4000/doc/concepts/attributes.html" />
<meta property="og:site_name" content="Fleather" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Style Attributes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Style Attributes","url":"http://localhost:4000/doc/concepts/attributes.html"}</script>
<!-- End Jekyll SEO tag -->

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          
            <a id="forkme_banner" href="https://github.com/fleather-editor/fleather-editor.github.io">View on GitHub</a>
          

          <h1 id="project_title">Fleather</h1>
          <h2 id="project_tagline"></h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2 id="style-attributes">Style Attributes</h2>

<blockquote>
  <p>If you haven’t yet, read introduction to Fleather document model called
Parchment <a href="/doc/concepts/data-and-document.html">here</a>.</p>
</blockquote>

<p>Style attributes in Parchment documents are simple key-value pairs, where
keys identify the attribute and value describes the style applied, for
instance, <code class="language-plaintext highlighter-rouge">{ "heading": 1 }</code> defines heading style for a line of
text with value <code class="language-plaintext highlighter-rouge">1</code> (equivalent of <code class="language-plaintext highlighter-rouge">h1</code> in HTML).</p>

<p>Note that one attribute can describe multiple different styles depending
on the current value. E.g. attribute with key “heading” can be set to values
<code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">2</code> or <code class="language-plaintext highlighter-rouge">3</code>, equivalents of <code class="language-plaintext highlighter-rouge">h1</code>, <code class="language-plaintext highlighter-rouge">h2</code> and <code class="language-plaintext highlighter-rouge">h3</code> in HTML. This prevents
a line of text from being formatted as <code class="language-plaintext highlighter-rouge">h1</code> and <code class="language-plaintext highlighter-rouge">h2</code> heading at the same time,
which is intentional.</p>

<p>Additionally, each attribute gets assigned one of two scopes. An
attribute can be either <em>inline-scoped</em> or <em>line-scoped</em>, but not both.
A good example of an inline-scoped attribute is “bold” attribute. Bold
style can be applied to any character within a line, but not to the
line itself. Similarly “heading” style is line-scoped and has effect
only on the line as a whole.</p>

<p>Below table summarizes information about all currently supported
attributes in Fleather:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Key</th>
      <th>Scope</th>
      <th>Type</th>
      <th>Valid values</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Bold</td>
      <td><code class="language-plaintext highlighter-rouge">b</code></td>
      <td><code class="language-plaintext highlighter-rouge">inline</code></td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td><code class="language-plaintext highlighter-rouge">true</code></td>
    </tr>
    <tr>
      <td>Italic</td>
      <td><code class="language-plaintext highlighter-rouge">i</code></td>
      <td><code class="language-plaintext highlighter-rouge">inline</code></td>
      <td><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td><code class="language-plaintext highlighter-rouge">true</code></td>
    </tr>
    <tr>
      <td>Link</td>
      <td><code class="language-plaintext highlighter-rouge">a</code></td>
      <td><code class="language-plaintext highlighter-rouge">inline</code></td>
      <td><code class="language-plaintext highlighter-rouge">String</code></td>
      <td>Non-empty string</td>
    </tr>
    <tr>
      <td>Heading</td>
      <td><code class="language-plaintext highlighter-rouge">heading</code></td>
      <td><code class="language-plaintext highlighter-rouge">line</code></td>
      <td><code class="language-plaintext highlighter-rouge">int</code></td>
      <td><code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">2</code> and <code class="language-plaintext highlighter-rouge">3</code></td>
    </tr>
    <tr>
      <td>Block</td>
      <td><code class="language-plaintext highlighter-rouge">block</code></td>
      <td><code class="language-plaintext highlighter-rouge">line</code></td>
      <td><code class="language-plaintext highlighter-rouge">String</code></td>
      <td><code class="language-plaintext highlighter-rouge">"ul"</code>, <code class="language-plaintext highlighter-rouge">"ol"</code>, <code class="language-plaintext highlighter-rouge">"code"</code> and <code class="language-plaintext highlighter-rouge">"quote"</code></td>
    </tr>
    <tr>
      <td>Embed</td>
      <td><code class="language-plaintext highlighter-rouge">embed</code></td>
      <td><code class="language-plaintext highlighter-rouge">inline</code></td>
      <td><code class="language-plaintext highlighter-rouge">Map</code></td>
      <td><code class="language-plaintext highlighter-rouge">"hr"</code>, <code class="language-plaintext highlighter-rouge">"image"</code></td>
    </tr>
  </tbody>
</table>

<p>Removing a specific style is as simple as setting corresponding
attribute to <code class="language-plaintext highlighter-rouge">null</code>.</p>

<p>Here is an example of applying some styles to a document:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'package:parchment/parchment.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">makeItPretty</span><span class="p">(</span><span class="n">ParchmentDocument</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">/// All attributes can be accessed through [ParchmentAttribute] class.</span>

  <span class="c1">// Format 5 characters starting at index 0 as bold.</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">bold</span><span class="o">);</span>

  <span class="c1">// Similarly for italic.</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">italic</span><span class="o">);</span>

  <span class="c1">// Format the first line as a heading (level 1).</span>
  <span class="c1">// Note that there is no need to specify character range of the whole</span>
  <span class="c1">// line. Simply set index position to anywhere within the line and</span>
  <span class="c1">// length to 0.</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">heading</span><span class="o">.</span><span class="na">level1</span><span class="o">);</span>

  <span class="c1">// Add a link:</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">link</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">'https://github.com'</span><span class="o">));</span>

  <span class="c1">// Format a line as code block. Similarly to heading styles there is no need</span>
  <span class="c1">// to specify the whole character range of the line. In following example:</span>
  <span class="c1">// whichever line is at character index 23 in the document will get</span>
  <span class="c1">// formatted as code block.</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">23</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">block</span><span class="o">.</span><span class="na">code</span><span class="o">);</span>

  <span class="c1">// Remove heading style from the first line. All attributes</span>
  <span class="c1">// have `unset` property which can be used the same way.</span>
  <span class="n">document</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">ParchmentAttribute</span><span class="o">.</span><span class="na">heading</span><span class="o">.</span><span class="na">unset</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="how-attributes-are-stored-in-deltas">How attributes are stored in Deltas</h3>

<p>As mentioned previously a document delta consists of a sequence of <code class="language-plaintext highlighter-rouge">insert</code>
operations. Attributes (if any) are stored as metadata on each of the
operations.</p>

<p>There is a difference in how line and inline-scoped attributes are
handled. Since Deltas are essentially a flat data structure there is
nothing in the format itself to represent a line of text, which is
required to allow storing line-scoped style attributes.</p>

<p>To solve this issue Parchment document (similarly to Quill.js) reserves the
<strong>newline</strong> character (aka <code class="language-plaintext highlighter-rouge">\n</code> and <code class="language-plaintext highlighter-rouge">0x0A</code>) as storage for line-scoped
styles.</p>

<p>Parchment document model is designed to enforce this rule and
prevents malformed changes from being composed into a document. For
instance, an attempt to apply “bold” style to a newline character
will have no effect.</p>

<p>Below is an example of Parchment document’s Delta with two lines of text.
The first line is formatted as an <code class="language-plaintext highlighter-rouge">h1</code> heading and on the second line
there is bold-styled word “Flutter”:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="n">delta</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Delta</span><span class="o">();</span>
<span class="n">delta</span>
  <span class="o">..</span><span class="na">insert</span><span class="o">(</span><span class="s">'Fleather Editor'</span><span class="o">)</span>
  <span class="o">..</span><span class="na">insert</span><span class="o">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="o">,</span> <span class="nl">attributes:</span> <span class="o">{</span><span class="s">'heading'</span><span class="o">:</span> <span class="mi">1</span><span class="o">})</span>
  <span class="o">..</span><span class="na">insert</span><span class="o">(</span><span class="s">'A rich text editor for '</span><span class="o">);</span>
  <span class="o">..</span><span class="na">insert</span><span class="o">(</span><span class="s">'Flutter'</span><span class="o">,</span> <span class="nl">attributes:</span> <span class="o">{</span><span class="s">'b'</span><span class="o">:</span> <span class="kc">true</span><span class="o">});</span>
  <span class="o">..</span><span class="na">insert</span><span class="o">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="o">);</span>
</code></pre></div></div>

<p>Note that there is no block-level scope for style attributes. Again,
given flat structure of Deltas there is nothing that can represent a
block of lines which share the same style, e.g. bullet list. And we
already reserved newline character for line styles.</p>

<p>As it turns out, this is not a big issue and it is possible to achieve
a friendly user experience without this extra level in a document model.</p>

<p>The <code class="language-plaintext highlighter-rouge">block</code> attribute in Parchment documents is line-scoped. To change a
group of lines from “bullet list” to “number list” we need to update
block style on each of the lines individually. Fleather editor abstracts
away such details with help of <a href="/doc/concepts/heuristics.html">heuristic rules</a>.</p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">Fleather maintained by <a href="https://github.com/fleather-editor">fleather-editor</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>
